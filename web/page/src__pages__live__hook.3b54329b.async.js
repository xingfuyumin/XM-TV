(self.webpackChunk=self.webpackChunk||[]).push([[309],{69742:function($,h,e){"use strict";e.r(h),e.d(h,{default:function(){return Z}});var L=e(5574),g=e.n(L),P=e(97857),R=e.n(P),S=e(15009),m=e.n(S),T=e(13769),E=e.n(T),K=e(99289),p=e.n(K),C=e(95898),j=e(11238),x=["url"],G=function(){var l=p()(m()().mark(function u(v){var c,n;return m()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return c=v.url,n=E()(v,x),i.abrupt("return",(0,j.ZP)(c,n).then(function(r){if(n.responseType==="blob"){var t=r,a=t.response.headers.get("fileName");return{data:t.data,name:a}}return r.data}).catch(function(r){var t;if((r==null||(t=r.response)===null||t===void 0?void 0:t.status)!==200){var a;C.FN.error(((a=r.data)===null||a===void 0?void 0:a.msg)||r.toString())}throw new Error("")}));case 2:case"end":return i.stop()}},u)}));return function(u){return l.apply(this,arguments)}}(),I="/api/v1",A=function(u){return"".concat(I).concat(u)},F={LIVE:{list:{url:A("/lives"),method:"GET"}}},H=F.LIVE.list,N=function(){return G(R()({},H))},V=e(1249),W=e(85437),d=e(62435),Z=function(){var l=(0,V.useSearchParams)(),u=g()(l,2),v=u[0],c=u[1],n=(0,d.useRef)(null),f=(0,d.useRef)(null),i=(0,W.Z)(function(){return N()},{cacheKey:"queryLiveList",cacheTime:-1,staleTime:-1}),r=i.data,t=i.loading,a=v.get("key")||"",M=function(s){v.set("key",s),c(v)};return(0,d.useEffect)(function(){var o=window.Hls,s=f.current;o.isSupported()&&s&&(n.current=new o)},[]),(0,d.useEffect)(function(){var o,s=f.current,y=r==null||(o=r.find(function(X){return X.id===a}))===null||o===void 0?void 0:o.src;n.current&&s&&y&&(n.current.loadSource(y),n.current.attachMedia(s))},[a,r]),{liveKey:a,liveList:r,loading:t,videoRef:f,handleLiveKeyChange:M}}},24654:function(){}}]);
