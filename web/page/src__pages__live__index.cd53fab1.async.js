(self.webpackChunk=self.webpackChunk||[]).push([[424,83,510,309],{97237:function(I,i,e){"use strict";e.r(i);var l=e(5574),E=e.n(l),s=e(62435);i.default=function(d,t){var a=(0,s.useState)(""),c=E()(a,2),o=c[0],f=c[1],C=(0,s.useMemo)(function(){var n={};return t==null||t.forEach(function(r){n[r.class]||(n[r.class]=[]),n[r.class].push(r)}),n},[t]);return(0,s.useEffect)(function(){var n,r=t==null||(n=t.find(function(L){return L.id===d}))===null||n===void 0?void 0:n.class;f(r||"\u4E2D\u592E\u53F0")},[d,t]),{groupMap:C,group:o,setGroup:f}}},59481:function(I,i,e){"use strict";e.r(i),e.d(i,{default:function(){return f}});var l={list:"list___jDrCZ",item:"item___kTjlb",active:"active___F5oAQ",disabled:"disabled___LN1Ge"},E=e(97237),s=e(95898),d=e(94184),t=e.n(d),a=e(86074),c=s.mQ.TabPane,o=function(n){var r=n.liveKey,L=n.liveList,S=n.onLiveKeyChange,p=(0,E.default)(r,L),F=p.group,A=p.setGroup,G=p.groupMap,T=function(N){var K=G[N]||[];return K.length?(0,a.jsx)(s.aV,{dataSource:K,className:l.list,renderItem:function(v){return(0,a.jsx)(s.aV.Item,{className:t()(v.src?null:l.disabled,r===v.id?l.active:null,l.item),onClick:function(){return v.src?S(v.id):null},children:v.name})},grid:{gutter:12,span:8}}):null};return(0,a.jsxs)(s.mQ,{className:l.root,activeKey:F,onChange:A,children:[(0,a.jsx)(c,{tab:"\u4E2D\u592E\u53F0",itemKey:"\u4E2D\u592E\u53F0",children:T("\u4E2D\u592E\u53F0")}),(0,a.jsx)(c,{tab:"\u5730\u65B9\u53F0",itemKey:"\u5730\u65B9\u53F0",children:T("\u5730\u65B9\u53F0")}),(0,a.jsx)(c,{tab:"\u5E7F\u64AD\u53F0",itemKey:"\u5E7F\u64AD\u53F0",children:T("\u5E7F\u64AD\u53F0")}),(0,a.jsx)(c,{tab:"\u5176\u4ED6",itemKey:"\u5176\u4ED6",children:T("\u5176\u4ED6")})]})},f=o},69742:function(I,i,e){"use strict";e.r(i),e.d(i,{default:function(){return V}});var l=e(5574),E=e.n(l),s=e(97857),d=e.n(s),t=e(15009),a=e.n(t),c=e(13769),o=e.n(c),f=e(99289),C=e.n(f),n=e(95898),r=e(11238),L=["url"],S=function(){var v=C()(a()().mark(function m(x){var R,g;return a()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return R=x.url,g=o()(x,L),j.abrupt("return",(0,r.ZP)(R,g).then(function(u){if(g.responseType==="blob"){var y=u,h=y.response.headers.get("fileName");return{data:y.data,name:h}}return u.data}).catch(function(u){var y;if((u==null||(y=u.response)===null||y===void 0?void 0:y.status)!==200){var h;n.FN.error(((h=u.data)===null||h===void 0?void 0:h.msg)||u.toString())}throw new Error("")}));case 2:case"end":return j.stop()}},m)}));return function(m){return v.apply(this,arguments)}}(),p="/api/v1",F=function(m){return"".concat(p).concat(m)},A={LIVE:{list:{url:F("/lives"),method:"GET"}}},G=A.LIVE.list,T=function(){return S(d()({},G))},O=e(1249),N=e(85437),K=e(62435),V=function(){var v=(0,O.useSearchParams)(),m=E()(v,2),x=m[0],R=m[1],g=(0,K.useRef)(null),M=(0,K.useRef)(null),j=(0,N.Z)(function(){return T()},{cacheKey:"queryLiveList",cacheTime:-1,staleTime:-1}),u=j.data,y=j.loading,h=x.get("key")||"",U=function(D){x.set("key",D),R(x)};return(0,K.useEffect)(function(){var P=window.Hls,D=M.current;P.isSupported()&&D&&(g.current=new P)},[]),(0,K.useEffect)(function(){var P,D=M.current,B=u==null||(P=u.find(function(W){return W.id===h}))===null||P===void 0?void 0:P.src;g.current&&D&&B&&(g.current.loadSource(B),g.current.attachMedia(D))},[h,u]),{liveKey:h,liveList:u,loading:y,videoRef:M,handleLiveKeyChange:U}}},11344:function(I,i,e){"use strict";e.r(i),e.d(i,{default:function(){return a}});var l=e(69742),E=e(95898),s=e(59481),d=e(86074),t=function(){var o=(0,l.default)(),f=o.liveKey,C=o.liveList,n=o.loading,r=o.videoRef,L=o.handleLiveKeyChange;return(0,d.jsxs)(E.yC,{spinning:n,children:[(0,d.jsx)("video",{ref:r,controls:!0,autoPlay:!0}),(0,d.jsx)(s.default,{liveList:C,liveKey:f,onLiveKeyChange:L})]})},a=t},24654:function(){}}]);
