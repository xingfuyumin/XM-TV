(self.webpackChunk=self.webpackChunk||[]).push([[309],{69742:function(K,h,e){"use strict";e.r(h),e.d(h,{default:function(){return B}});var g=e(5574),t=e.n(g),P=e(97857),L=e.n(P),C=e(15009),E=e.n(C),p=e(13769),Z=e.n(p),j=e(99289),x=e.n(j),I=e(95898),W=e(11238),A=["url"],G=function(){var d=x()(E()().mark(function i(v){var y,l;return E()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return y=v.url,l=Z()(v,A),a.abrupt("return",(0,W.ZP)(y,l).then(function(r){if(l.responseType==="blob"){var n=r,u=n.response.headers.get("fileName");return{data:n.data,name:u}}return r.data}).catch(function(r){var n;if((r==null||(n=r.response)===null||n===void 0?void 0:n.status)!==200){var u;I.FN.error(((u=r.data)===null||u===void 0?void 0:u.msg)||r.toString())}throw new Error("")}));case 2:case"end":return a.stop()}},i)}));return function(i){return d.apply(this,arguments)}}(),H="/api/v1",M=function(i){return"".concat(H).concat(i)},D={LIVE:{list:{url:M("/lives"),method:"GET"}}},F=D.LIVE.list,N=function(){return G(L()({},F))},O=e(93724),V=e(1249),z=e(68421),m=e(62435),B=function(){var d=(0,V.useSearchParams)(),i=t()(d,2),v=i[0],y=i[1],l=(0,O.Z)(),c=(0,m.useRef)(null),a=(0,m.useRef)(null),r=(0,z.Z)(function(){return N()},{cacheKey:"queryLiveList",cacheTime:-1,staleTime:-1}),n=r.data,u=r.loading,R=v.get("key")||"",S=function(s){v.set("key",s),y(v)};return(0,m.useEffect)(function(){var o=window.Hls,s=a.current;o.isSupported()&&s&&(c.current=new o)},[]),(0,m.useEffect)(function(){var o,s=a.current,T=n==null||(o=n.find(function(f){return f.id===R}))===null||o===void 0?void 0:o.src;c.current&&s&&(T?(c.current.loadSource(T),c.current.attachMedia(s)):n!=null&&n.filter(function(f){return f.src}).length&&S(n==null?void 0:n.find(function(f){return f.src})[0]))},[R,n]),{liveKey:R,liveList:n,loading:u,videoRef:a,handleLiveKeyChange:S,isPc:l}}},93724:function(K,h,e){"use strict";var g=e(28663);h.Z=function(){var t=(0,g.Z)(document.body),P=(t==null?void 0:t.width)||document.body.offsetWidth,L=(t==null?void 0:t.height)||document.body.offsetHeight;return P>L}},24654:function(){}}]);
